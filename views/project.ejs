<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="/css/project.css">
    </head>
    
    <body>
        <script src="/js/socket.io.js"></script>
        <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
        <script>
            var userid = <%= userid %>;
            var pid = <%= pid %>;
            var socket = io();
            socket.emit('add user', { userid: userid, pid: pid});
            socket.on('load data', function(data){
                $("#todo").empty();
                $("#todo").append("<div class='element' onclick='changePage();'>test</div>");
            });

            function makeFormHide(){
                var x = document.getElementById('inviteUser');
                if (x.style.display === 'none') {
                    x.style.display = '';
                } else {
                    x.style.display = 'none';
                }
            };

            function inviteUser(){
                var x = $("#invitedUsername").val();
                socket.emit('invite user', { pid: pid, username: x });
                makeFormHide();
                return ;
            };

            function changePage(){
                var $workShow = $('#workShow') ;
                var $projectShow = $('#projectShow');
                if($workShow.css('display') == 'none'){
                    $workShow.show();
                    $projectShow.hide();
                } else {
                    $workShow.hide();
                    projectShow.show();
                }
                return;
            }
        </script>

        <div>
            <h2><%= pname %></h2>
            <span style="width: 15%; margin-left:85%">
                <button class="header-button" onclick="makeFormHide();">참여자 초대</button>
                <button class="header-button" onclick="location.href='/logout'">로그아웃</button>
            </span>
        </div>        
        <div id="inviteUser" style="display: none; border-bottom: 0px;">
                <p>초대 대상: <input type="text" id="invitedUsername"><button onclick="inviteUser();">생성</button></p>
        </div>
        <div class="container" id="projectShow">
            <div class="padding">
               </div>
            <div class="left">
                <div class="titlebox">
                    <h4>To Do</h4>
                </div>
                <div class="elementbox" id="todo">
                </div>
            </div>
            <div class="right">
                <div class="right-left">
                    <div class="titlebox">
                        <h4>Doing</h4>
                    </div>
                    <div class="elementbox">
                    </div>
                </div>
                <div class="right-right">
                    <div class="titlebox">
                        <h4>Done</h4>
                    </div>
                    <div class="elementbox">
                </div>

                </div>
            </div>
        </div>
        <div class="container" id="workShow">
        </div>
    <body>
</body>
